<!DOCTYPE html>

<html lang="en">

<head>

    <!-- ==============================================
        Basic Page Needs
        =============================================== -->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>DevJey - Dashboard</title>

    <meta name="description" content="Creative Agency, Portfolio, Corporate, Startup & Technology">
    <meta name="subject" content="Creative Agency, Portfolio, Corporate, Startup & Technology">
    <meta name="author" content="Codings">

    <!-- ==============================================
        Favicons
        =============================================== -->
    <link rel="shortcut icon" href="/static/images/favicon.ico">
    <link rel="apple-touch-icon" href="/static/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/images/apple-touch-icon-114x114.png">

    <!-- ==============================================
        Vendor Stylesheet
        =============================================== -->
    <link rel="stylesheet" href="/static/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/vendor/slider.min.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/vendor/icons.min.css">
    <link rel="stylesheet" href="/static/css/vendor/animation.min.css">
    <link rel="stylesheet" href="/static/css/vendor/gallery.min.css">
    <link rel="stylesheet" href="/static/css/default.css">

    <style>
        :root {
            --header-bg-color: #111111;
            --nav-item-color: #f5f5f5;
            --hero-bg-color: #111111;

            --section-1-bg-color: #111111;

            --footer-bg-color: #191919;
        }
    </style>

</head>

<body>
    <!-- Header -->
    <header id="header">
        <!-- Navbar -->
        <nav data-aos="zoom-out" data-aos-delay="800" class="navbar navbar-expand">
            <div class="container header">

                <!-- Navbar Brand-->
                <a class="navbar-brand" href="/">
                    DevJey<i>.</i>
                </a>

                <!-- Nav holder -->
                <div class="ml-auto"></div>
                <!--Nav items -->
                <ul class="navbar-nav items">
                    <li class="nav-item">
                        <a href="/processes" class="nav-link active">My Processes</a>
                    </li>
                </ul>
                <!-- Navbar Action -->
                <ul class="navbar-nav action">
                    <li class="nav-item ml-3">
                        <h6>Hi {{user}}!</h6>
                    </li>
                    <li class="nav-item ml-3">
                        <a href="#" target="_blank" class="btn ml-lg-auto primary-button" class="nav-link" id="logout"
                            data-toggle="modal" data-target="#logout"><i class="icon-rocket"></i>Logout</a>
                    </li>
                </ul>
            </div>
        </nav>

    </header>

    <section id="contact" class="section-1 odd form">
        <div class="container smaller">

            <br>
            <h3>All Past Processes</h3>
            <br>
            {% if processes %}
            <table class="table table-responsive-md table-bordered" style="color:white;border-collapse:collapse;">
                <thead>
                    <tr>
                        <th>PID</th>
                        <th>Link</th>
                        <th>Message</th>
                        <th>Repeat after every hr(s)</th>
                        <th>Iterations so far</th>
                        <th>Last Run On</th>
                        <th>Action</th>
                    </tr>
                </thead>
                {% for p in processes %}
                <tbody>
                    <tr>
                        <td name="pid" id="pid">{{p.id}}</td>
                        <td name="link" id="link">{{p.link}}</td>
                        <td name="message" id="message">{{p.message}}</td>
                        <td name="duration" id="duration">{{p.duration}}</td>
                        <td>{{p.iterations}}</td>
                        <td>{{p.created}}</td>
                        <td>
                            <button class="btn ml-lg-auto primary-button" class="nav-link" id="start" type="submit"><i
                                    class="icon-load"></i>Restart</button></td>
                    </tr>
                </tbody>
                {% endfor %}
            </table>
            {% else %}
            <h6>No Past Processes currently!</h6>
            {% endif %}

            <br><br><br>
            <br><br><br>
            <br><br><br>
            <br><br><br>
        </div>
    </section>



    <!-- Footer -->
    <footer>

        <!-- Copyright -->
        <section id="copyright" class="p-3 odd copyright">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-md-6 p-3 text-center text-lg-left">
                        <p>Automate your world.</p>
                    </div>
                    <div class="col-12 col-md-6 p-3 text-center text-lg-right">
                        <p>Â© 2020 <a href="https://themeforest.net/user/codingsdev" target="_blank">DevJey</a>.</p>
                    </div>
                </div>
            </div>
        </section>

    </footer>



    <!-- ==============================================
        Google reCAPTCHA // Put your site key here
        =============================================== -->
    <script src="https://www.google.com/recaptcha/api.js?render=6Lf-NwEVAAAAAPo_wwOYxFW18D9_EKvwxJxeyUx7"></script>

    <!-- ==============================================
        Vendor Scripts
        =============================================== -->
    <script src="/static/js/vendor/jquery.min.js"></script>
    <script src="/static/js/vendor/jquery.easing.min.js"></script>
    <script src="/static/js/vendor/popper.min.js"></script>
    <script src="/static/js/vendor/bootstrap.min.js"></script>
    <script src="/static/js/vendor/ponyfill.min.js"></script>
    <script src="/static/js/vendor/slider.min.js"></script>
    <script src="/static/js/vendor/animation.min.js"></script>
    <script src="/static/js/vendor/gallery.min.js"></script>
    <script src="/static/js/main.js"></script>
    <script>
        function logout() {
            $.get("/logout")
        }
        function start_transactions() {
            var pid = $("#pid").text();
            var link = $("#link").text();;
            var message = $("#message").text();;
            var duration = $("#duration").text();;
            $.get("/automate", { pid: pid, message: message, link: link, duration: duration }).then(res => {
                window.location.reload();
            }).then(res => {
                console.log(res)
            })
        }
        $("#logout").click(function (e) {
            e.preventDefault();
            logout();
            window.location.replace("/")
        })
        $("#start").click(function () {
            start_transactions();
        })
    </script>
</body>


</html>